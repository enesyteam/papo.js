{"version":3,"sources":["../../lib/site.media.buildForm-browser.js"],"names":[],"mappings":";;;;;kBAawB,a;;AAVxB;;;;;;AAEA,IAAM,QAAQ,qBAAc,aAAd,CAAd;;AAEA;;;;;;AAPA;;;AAae,SAAS,aAAT,CAAwB,KAAxB,EAAgC;AAC9C,KAAM,WAAW,EAAjB;AACA,KAAM,UAAU,MAAM,OAAN,CAAe,KAAf,CAAhB;AACA,SAAQ,UAAU,KAAV,GAAkB,CAAE,KAAF,CAA1B;;AAEA,KAAI,UAAJ;AAAA,KAAO,UAAP;AAAA,KAAU,UAAV;AAAA,KAAa,cAAb;AACA,MAAM,IAAI,CAAV,EAAa,IAAI,MAAM,MAAvB,EAA+B,GAA/B,EAAqC;AACpC,MAAI,MAAO,CAAP,CAAJ;;AAEA,MAAM,WAAW,CAAC,CAAE,EAAE,cAAtB;AACA,MAAM,SAAS,gBAAgB,OAAO,IAAvB,IAA+B,aAAa,IAA3D;;AAEA,QAAO,cAAP,EAAuB,QAAvB;AACA,QAAO,YAAP,EAAqB,MAArB;;AAEA,MAAK,CAAE,MAAF,IAAY,CAAE,QAAnB,EAA8B;AAC7B;AACA,QAAM,CAAN,IAAW,CAAX,EAAe;AACd,UAAO,cAAP,EAAuB,CAAvB,EAA0B,EAAG,CAAH,CAA1B;AACA,QAAK,WAAW,CAAhB,EAAoB;AACnB,aAAQ,WAAW,CAAX,GAAe,IAAf,GAAsB,CAAtB,GAA0B,GAAlC;AACA,cAAS,IAAT,CAAe,CAAE,KAAF,EAAS,EAAG,CAAH,CAAT,CAAf;AACA;AACD;AACD;AACA,OAAI,EAAE,IAAN;AACA;;AAED,WAAS,IAAT,CAAe,CAAE,SAAF,EAAa,CAAb,CAAf;AACA;;AAED,QAAO,QAAP;AACA","file":"site.media.buildForm-browser.js","sourcesContent":["/**\n * Module dependencies.\n */\nimport debugFactory from 'debug';\n\nconst debug = debugFactory( 'wpcom:media' );\n\n/**\n * Build a formData object to be sent in a POST request\n *\n * @param  {Array|File} files - array of files\n * @return {Array} formData array\n */\nexport default function buildFormData( files ) {\n\tconst formData = [];\n\tconst isArray = Array.isArray( files );\n\tfiles = isArray ? files : [ files ];\n\n\tlet i, f, k, param;\n\tfor ( i = 0; i < files.length; i++ ) {\n\t\tf = files[ i ];\n\n\t\tconst isStream = !! f._readableState;\n\t\tconst isFile = 'undefined' !== typeof File && f instanceof File;\n\n\t\tdebug( 'isStream: %s', isStream );\n\t\tdebug( 'isFile: %s', isFile );\n\n\t\tif ( ! isFile && ! isStream ) {\n\t\t\t// process file attributes like as `title`, `description`, ...\n\t\t\tfor ( k in f ) {\n\t\t\t\tdebug( 'add %o => %o', k, f[ k ] );\n\t\t\t\tif ( 'file' !== k ) {\n\t\t\t\t\tparam = 'attrs[' + i + '][' + k + ']';\n\t\t\t\t\tformData.push( [ param, f[ k ] ] );\n\t\t\t\t}\n\t\t\t}\n\t\t\t// set file path\n\t\t\tf = f.file;\n\t\t}\n\n\t\tformData.push( [ 'media[]', f ] );\n\t}\n\n\treturn formData;\n}\n"]}